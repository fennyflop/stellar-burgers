(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{110:function(e,t,n){e.exports={container:"orders-list_container__3sjN6"}},111:function(e,t,n){e.exports={form:"user-form_form__1lsS4"}},112:function(e,t,n){e.exports={popup:"modal-overlay_popup__2-EDg"}},113:function(e,t,n){e.exports={check:"order-submit_check__ijXoX"}},114:function(e,t,n){e.exports={card:"constructor-item_card__1EgVr"}},18:function(e,t,n){e.exports={container:"order-summary_container__GgJse",id:"order-summary_id__20m94",name:"order-summary_name__3XyVx",green:"order-summary_green__3UQd5",status:"order-summary_status__1gX4L",list:"order-summary_list__2U_7e",item:"order-summary_item__2YDD9",ingredient:"order-summary_ingredient__S8Gpr",check:"order-summary_check__1NUzj",footer:"order-summary_footer__22tV8",price:"order-summary_price__1SJUE"}},20:function(e,t,n){e.exports={container:"ingredient-details_container__178Zh",title:"ingredient-details_title__i_Tje",image:"ingredient-details_image__2-P7O",list:"ingredient-details_list__j-3ZO",info:"ingredient-details_info__3OQTx",name:"ingredient-details_name__2c-9h"}},202:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(34),c=n.n(i),s=n(30),o=n(53),l=n(54),d=new(function(){function e(t){Object(o.a)(this,e),this._baseUrl=void 0,this._baseUrl=t}return Object(l.a)(e,[{key:"_handleOriginalResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status,"."))}},{key:"logout",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/auth/logout"),{method:"POST",body:JSON.stringify({token:e}),headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){return n._handleOriginalResponse(e)}))}},{key:"getUsersOrderHistory",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/orders"),{method:"GET",headers:{"Content-type":"application/json",Authorization:e}}).then((function(e){return t._handleOriginalResponse(e)}))}},{key:"updateToken",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/token"),{method:"POST",body:JSON.stringify({token:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return t._handleOriginalResponse(e)}))}},{key:"changeUserInfo",value:function(e,t,n,r){var a=Object(s.a)({name:e,email:t},n?"password":"",n);return console.log(a,n),n&&(a.password=n),fetch("".concat(this._baseUrl,"/auth/user"),{method:"PATCH",headers:{"Content-type":"application/json",Authorization:r},body:JSON.stringify(a)})}},{key:"getUserInfo",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/user"),{headers:{"Content-Type":"application/json",Authorization:e}}).then((function(e){return t._handleOriginalResponse(e)}))}},{key:"getIngredients",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/ingredients")).then((function(t){return e._handleOriginalResponse(t)}))}},{key:"getInitialOrders",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/orders/all")).then((function(t){return e._handleOriginalResponse(t)}))}},{key:"handleOrder",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/orders"),{method:"POST",body:JSON.stringify({ingredients:e}),headers:{"Content-Type":"application/json",Authorization:t}}).then((function(e){return n._handleOriginalResponse(e)}))}},{key:"attemptLogin",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return t._handleOriginalResponse(e)}))}},{key:"createNewUser",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/auth/register"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return t._handleOriginalResponse(e)}))}},{key:"forgotPassword",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/password-reset"),{method:"POST",body:JSON.stringify({email:e}),headers:{"Content-Type":"application/json"}}).then((function(e){return t._handleOriginalResponse(e)}))}},{key:"resetPassword",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/password-reset/reset"),{method:"POST",body:JSON.stringify({password:e,token:t}),headers:{"Content-Type":"application/json"}}).then((function(e){return n._handleOriginalResponse(e)}))}}]),e}())("https://norma.nomoreparties.space/api"),u=n(8),j="RESET_BURGER",_="SWAP_INGREDIENTS",m="CHANGE_BURGER_BUN",b="ADD_BURGER_INDREDIENT",p="REMOVE_BURGER_INGREDIENT",f="FEED_REQUEST_FAIL",O="FEED_REQUEST_SUCCESS",x="FEED_REQUEST_PENDING",h="INGREDIENT_REQUEST_FAIL",g="INGREDIENT_REQUEST_PENDING",y="INGREDIENT_REQUEST_SUCCESS",v="OPEN_ORDER_POPUP",N="CLOSE_ORDER_POPUP",w="ORDER_POPUP_REQUEST_FAIL",k="ORDER_POPUP_REQUEST_PENDING",E="WS_CONNECTION_START",S="WS_CONNECTION_CLOSED",C="LOGOUT",R="UPDATE_USER_INFO",T="UPDATE_ACCESS_TOKEN",I="UPDATE_ORDER_HISTORY",q="OPEN_HEADER_POPUP",P="CLOSE_HEADER_POPUP",U="SWITCH_IS_MOBILE_VALUE",D=n(2),F=n(119),B=n(22),A=function(){return Object(B.b)()},L=B.c,V=n(0),M=["children"],z=function(e){var t=e.children,n=Object(F.a)(e,M),r=L((function(e){return Boolean(e.user.token)}));return Object(V.jsx)(u.b,Object(D.a)(Object(D.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(V.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})}}))},G=n(31),H=n.n(G);function J(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(n){console.log(n)}}function Q(e){try{return JSON.parse(window.localStorage.getItem(e)||"{}")}catch(t){console.log(t)}}var X=function(e){return function(t){d.getUsersOrderHistory(e).then((function(e){if(!e.success)throw new Error("Couldn't get user's orders");t({type:I,orders:e.orders})})).catch((function(e){console.log(e)}))}},W=function(e){return function(t){d.getUserInfo(e).then((function(e){var n=e.success,r=e.user,a=r.name,i=r.email;if(n)return t(Z(a,i));throw new Error("Unable to get user info.")})).catch((function(e){console.log(e)}))}};function Z(e,t){return{type:R,name:e,email:t}}function Y(e){return{type:T,token:e}}var K=n(5),$=n(110),ee=n.n($),te=n(17),ne=n(24),re=n.n(ne),ae=n(42),ie=n.n(ae),ce=function(e){var t=e.ingredient,n=e.last,r=e.size;return t?Object(V.jsxs)("div",{className:ie.a.element,children:[Object(V.jsx)("img",{className:ie.a.image,src:t.image_mobile,alt:"Image"}),n&&Object(V.jsx)("div",{className:ie.a.wrapper,children:Object(V.jsxs)("p",{className:"text text_type_main-default ".concat(ie.a.number),children:["+",(r||0)-8]})})]}):null},se=Object(r.memo)((function(e){var t=e.order,n=t.name,a=t.number,i=t.ingredients,c=t.createdAt,s=t._id,o=Object(u.h)(),l=Object(u.j)().url,d=L((function(e){return{initialIngredients:[].concat(Object(te.a)(e.ingredients.buns),Object(te.a)(e.ingredients.sauces),Object(te.a)(e.ingredients.mains))}})).initialIngredients,j=Object(r.useMemo)((function(){return Object(te.a)(new Set(i.map((function(e){return d.find((function(t){return t._id===e}))}))))}),[i]),_=Object(r.useMemo)((function(){var e=[];return d.forEach((function(t){i.some((function(e){return e===t._id}))&&e.push(Object(D.a)(Object(D.a)({},t),{},{count:i.filter((function(e){return e===t._id})).length}))})),e.reduce((function(e,t){return e+t.price*(t.count||1)}),0)}),[d,i]);return Object(V.jsx)(K.b,{to:{pathname:"".concat(l,"/").concat(s),state:{background:o}},style:{textDecoration:"none"},children:Object(V.jsxs)("li",{className:re.a.order,children:[Object(V.jsxs)("p",{className:"text text_type_digits-default ".concat(re.a.id),children:["#",a]}),Object(V.jsx)("p",{className:"text text_type_main-default text_color_inactive ".concat(re.a.date),children:c}),Object(V.jsx)("h3",{className:"text text_type_main-medium ".concat(re.a.name),children:n}),Object(V.jsx)("ul",{className:re.a.ingredients,children:j.map((function(e,t){return e&&(t<7||8===j.length)?Object(V.jsx)("li",{className:re.a.element,style:{right:"".concat(10*t,"px")},children:Object(V.jsx)(ce,{ingredient:e})},t):e&&8===t?Object(V.jsx)("li",{className:re.a.element,style:{right:"".concat(10*t,"px")},children:Object(V.jsx)(ce,{ingredient:e,last:!0,size:j.length})},t):null}))}),Object(V.jsx)("span",{className:"text text_type_digits-medium ".concat(re.a.price),children:_})]})})})),oe=function(e){var t=e.orders,n=e.custom;return t.length?Object(V.jsx)("ul",{className:ee.a.container,style:n,children:t.map((function(e){return Object(V.jsx)(se,{order:e},e._id)}))}):Object(V.jsx)("p",{className:"text text_type_main-large",children:"\u041d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})},le=n(59),de=n.n(le),ue=n(10),je=function(e){var t=Object(r.useState)(e),n=Object(ue.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(e),o=Object(ue.a)(c,2),l=o[0],d=o[1],u=Object(r.useState)(!0),j=Object(ue.a)(u,2),_=j[0],m=j[1];return{values:a,errors:l,isValid:_,handleChange:function(e){var t=e.currentTarget,n=t.name,r=t.value;i(Object(D.a)(Object(D.a)({},a),{},Object(s.a)({},n,r))),d(Object(D.a)(Object(D.a)({},l),{},Object(s.a)({},n,e.currentTarget.validationMessage))),m(e.currentTarget.closest("form").checkValidity())},changeValues:function(e){i(e)}}},_e=n(4),me=function(e){var t=e.name,n=void 0===t?"":t,a=e.value,i=void 0===a?"":a,c=e.error,s=void 0===c?"":c,o=e.type,l=void 0===o?"text":o,d=e.placeholder,u=void 0===d?"":d,j=e.size,_=void 0===j?"default":j,m=e.onChange,b=Object(r.useState)(!0),p=Object(ue.a)(b,2),f=p[0],O=p[1],x=Object(r.useRef)(null);return Object(V.jsx)(_e.Input,{ref:x,name:n,type:l,value:i,error:Boolean(s),errorText:s,placeholder:u,onBlur:function(){O(!0)},onChange:m,onIconClick:function(){O(!1),setTimeout((function(){return x&&x.current.focus()}),0)},disabled:f,icon:"EditIcon",size:_})},be=function(){var e=A(),t=L((function(e){return{name:e.user.name,email:e.user.email,token:e.user.token}})),n=t.name,a=t.email,i=t.token,c=je({name:"",email:"",password:""}),s=c.values,o=c.errors,l=c.isValid,u=c.handleChange,j=c.changeValues,_=Object(r.useCallback)((function(t){t.preventDefault(),e(function(e,t,n,r){return function(a){d.changeUserInfo(e,t,n,r).then((function(){a(t,e)})).catch((function(e){console.log(e)}))}}(s.name,s.email,s.password,i))}),[s]),m=Object(r.useCallback)((function(){n&&a&&j({name:n,email:a,password:s.password})}),[s,n,a]);return Object(r.useEffect)((function(){n&&a&&j({name:n,email:a,password:s.password})}),[n,a]),Object(V.jsxs)("form",{className:de.a.form,onSubmit:_,children:[Object(V.jsx)(me,{name:"name",type:"text",error:o.name,value:s.name||"",placeholder:"\u0418\u043c\u044f",onChange:u}),Object(V.jsx)(me,{name:"email",type:"email",error:o.email,value:s.email||"",placeholder:"\u041b\u043e\u0433\u0438\u043d",onChange:u}),Object(V.jsx)(me,{name:"password",type:"password",error:o.password,value:s.password||"",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:u}),Object(V.jsxs)("div",{className:de.a.confirmation+(s.name===n&&s.email===a&&!s.password||!l?de.a.none:""),children:[Object(V.jsx)(_e.Button,{type:"secondary",size:"medium",onClick:m,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(V.jsxs)(_e.Button,{type:"primary",size:"large",onClick:_,children:[" ","\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"]})]})]})},pe=function(){var e=A(),t=L((function(e){return e.user.token})),n=L((function(e){return e.user.orderHistory})),a=Object(r.useCallback)((function(){var n;e((n=t,function(e){var t=Q("token");d.logout(t,n).then((function(t){if(t.success)return console.log("LOGOUT"),J("token",""),e({type:C});throw new Error("Unable to logout.")})).catch((function(e){console.log(e)}))}))}),[e]);return Object(V.jsxs)("section",{className:H.a.profile,children:[Object(V.jsxs)("nav",{className:H.a.navigation,children:[Object(V.jsx)(K.c,{className:"text text_type_main-medium text_color_inactive ".concat(H.a.link),activeStyle:{color:"white"},to:"/profile/edit",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(V.jsx)(K.c,{className:"text text_type_main-medium text_color_inactive ".concat(H.a.link),activeStyle:{color:"white"},to:"/profile/orders",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(V.jsx)("button",{className:"text text_type_main-medium text_color_inactive ".concat(H.a.link),onClick:a,children:"\u0412\u044b\u0445\u043e\u0434"}),Object(V.jsx)("p",{className:"text text_type_main-small text_color_inactive ".concat(H.a.hint),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})]}),Object(V.jsxs)(u.d,{children:[Object(V.jsx)(u.b,{path:"/profile/edit",exact:!0,children:Object(V.jsx)(be,{})}),Object(V.jsx)(u.b,{path:"/profile/orders",children:Object(V.jsx)(oe,{orders:n,custom:{marginTop:"-70px"}})})]}),Object(V.jsx)(V.Fragment,{})," "]})},fe=n(35),Oe=n.n(fe),xe=n(111),he=n.n(xe),ge=function(e){var t=e.title,n=e.submitText,r=e.children,a=e.onSubmit;return Object(V.jsxs)("form",{className:he.a.form,noValidate:!0,onSubmit:a,children:[Object(V.jsx)("h2",{className:"text text_type_main-medium",children:t}),r,Object(V.jsx)(_e.Button,{type:"primary",size:"medium",children:n}),Object(V.jsx)("div",{className:"m-2"})]})},ye=function(){var e=Object(u.g)(),t=A(),n=L((function(e){return Boolean(e.user.token)})),a=je({email:"",password:""}),i=a.values,c=a.errors,s=a.isValid,o=a.handleChange,l=Object(r.useMemo)((function(){return e.location.state?e.location.state.from.pathname:"/"}),[e]),j=Object(r.useCallback)((function(n){var r,a;n.preventDefault(),t((r={email:i.email,password:i.password},a=function(){return e.replace({pathname:l})},function(e){d.attemptLogin({email:r.email,password:r.password}).then((function(t){var n=t.success,r=t.message,i=t.user,c=i.name,s=i.email,o=t.accessToken,l=t.refreshToken;if(n)return J("token",l),e(Z(c,s)),e(Y(o)),a();throw new Error("Error in attemt to login. "+r)})).catch((function(e){return console.log(e)}))}))}),[e,t,i,l]);return n?Object(V.jsx)(u.a,{to:{pathname:l}}):Object(V.jsxs)("section",{className:Oe.a.container,children:[Object(V.jsxs)(ge,{submitText:"\u0412\u043e\u0439\u0442\u0438",title:"\u0412\u0445\u043e\u0434",isValid:s,onSubmit:j,children:[Object(V.jsx)(_e.Input,{onChange:o,value:i.email||"",error:Boolean(c.email),errorText:c.email,name:"email",type:"email",placeholder:"E-mail"}),Object(V.jsx)(_e.PasswordInput,{onChange:o,value:i.password||"",name:"password"})," "]}),Object(V.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(Oe.a.text),children:["\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(V.jsx)(K.b,{className:"text text_type_main-default ".concat(Oe.a.link),to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(V.jsx)("div",{className:"m-2"}),Object(V.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(Oe.a.text),children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(V.jsx)(K.b,{className:"text text_type_main-default ".concat(Oe.a.link),to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})},ve=n(60),Ne=n.n(ve),we=function(){var e=Object(u.g)(),t=A(),n=je({name:"",email:"",password:""}),r=n.values,a=n.errors,i=n.isValid,c=n.handleChange;return Object(V.jsxs)("section",{className:Ne.a.container,children:[Object(V.jsxs)(ge,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",submitText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",isValid:i,onSubmit:function(n){var a,i;n.preventDefault(),t((a={name:r.name,email:r.email,password:r.password},i=function(){var t=e.location.state?e.location.state.from.pathname:"/";return e.replace({pathname:t})},function(e){d.createNewUser({name:a.name,email:a.email,password:a.password}).then((function(t){var n=t.success,r=t.user,a=r.name,c=r.email,s=t.accessToken,o=t.refreshToken;if(n)return J("token",o),e(Z(a,c)),e(Y(s)),i();throw new Error("Couldn't create new user")})).catch((function(e){console.log(e)}))}))},children:[Object(V.jsx)(_e.Input,{onChange:c,value:r.name||"",error:Boolean(a.name),errorText:a.name,name:"name",type:"text",placeholder:"\u0418\u043c\u044f"}),Object(V.jsx)(_e.Input,{onChange:c,value:r.email||"",error:Boolean(a.email),errorText:a.email,name:"email",type:"email",placeholder:"E-mail"}),Object(V.jsx)(_e.PasswordInput,{onChange:c,value:r.password||"",name:"password"})," "]}),Object(V.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(Ne.a.text),children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(V.jsx)(K.b,{className:"text text_type_main-default ".concat(Ne.a.link),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},ke=n(61),Ee=n.n(ke),Se=function(){var e=A(),t=Object(u.g)(),n=je({password:"",code:""}),a=n.values,i=n.errors,c=n.isValid,s=n.handleChange,o=Object(r.useCallback)((function(e){var n,r;e.preventDefault(),n={password:a.password,code:a.code},r=function(){return t.push("/login")},d.resetPassword(n.password,n.code).then((function(e){if(e.success)return r()}))}),[a,e,t]);return Object(V.jsxs)("section",{className:Ee.a.container,children:[Object(V.jsxs)(ge,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",submitText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isValid:c,onSubmit:o,children:[Object(V.jsx)(_e.PasswordInput,{onChange:s,value:a.password||"",name:"password"})," ",Object(V.jsx)(_e.Input,{onChange:s,value:a.code||"",error:Boolean(i.code),errorText:i.code,name:"code",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",required:!0})]}),Object(V.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(Ee.a.text),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(V.jsx)(K.b,{className:"text text_type_main-default ".concat(Ee.a.link),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Ce=n(62),Re=n.n(Ce),Te=function(){var e=Object(B.b)(),t=Object(u.g)(),n=je({email:""}),a=n.values,i=n.errors,c=n.isValid,s=n.handleChange,o=Object(r.useCallback)((function(e){var n,r;e.preventDefault(),n={email:a.email},r=function(){return t.push("/reset-password")},d.forgotPassword(n.email).then((function(e){e.success&&r()})).catch((function(e){return console.log(e)}))}),[a,e,t]);return Object(V.jsxs)("section",{className:Re.a.container,children:[Object(V.jsx)(ge,{title:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",submitText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",isValid:c,onSubmit:o,children:Object(V.jsx)(_e.Input,{onChange:s,value:a.email||"",error:Boolean(i.email),errorText:i.email,name:"email",type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"})}),Object(V.jsxs)("p",{className:"text text_type_main-default text_color_inactive ".concat(Re.a.text),children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(V.jsx)(K.b,{className:"text text_type_main-default ".concat(Re.a.link),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},Ie=n(20),qe=n.n(Ie),Pe=function(){var e=Object(u.i)().id,t=L((function(t){return{inspectedIngredient:t.ingredients.buns.find((function(t){return t._id===e}))||t.ingredients.mains.find((function(t){return t._id===e}))||t.ingredients.sauces.find((function(t){return t._id===e}))}})).inspectedIngredient;return t?Object(V.jsxs)("section",{className:qe.a.container,children:[Object(V.jsx)("p",{className:"text text_type_main-large ".concat(qe.a.title),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(V.jsx)("img",{className:qe.a.image,src:t.image_large,alt:t.name}),Object(V.jsx)("p",{className:"text text_type_main-medium ".concat(qe.a.name),children:t.name}),Object(V.jsxs)("ul",{className:qe.a.list,children:[Object(V.jsxs)("li",{className:qe.a.info,children:[Object(V.jsx)("p",{className:"text text_type_main-small text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(V.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.calories})]}),Object(V.jsxs)("li",{className:qe.a.info,children:[Object(V.jsx)("p",{className:"text text_type_main-small text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(V.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.proteins})]}),Object(V.jsxs)("li",{className:qe.a.info,children:[Object(V.jsx)("p",{className:"text text_type_main-small text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(V.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.fat})]}),Object(V.jsxs)("li",{className:qe.a.info,children:[Object(V.jsx)("p",{className:"text text_type_main-small text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(V.jsx)("p",{className:"text text_type_digits-default text_color_inactive",children:t.carbohydrates})]})]})]}):null},Ue=n(84),De=n.n(Ue),Fe=n(120),Be=n(118),Ae=n(112),Le=n.n(Ae),Ve=document.getElementById("modals"),Me=function(e){Object(Fe.a)(n,e);var t=Object(Be.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(i.createPortal)(Object(V.jsx)("section",{className:Le.a.popup,onClick:this.props.onClose,children:this.props.children}),Ve)}}]),n}(a.a.PureComponent),ze=function(e){var t=e.actionType,n=e.link,a=void 0===n?"":n,i=e.children,c=Object(u.g)(),s=A();Object(r.useEffect)((function(){return document.addEventListener("keydown",o),function(){document.removeEventListener("keydown",o)}}),[i]);var o=function(e){if("Escape"===e.code)return l()},l=function(){if(t)return s({type:t});c.replace({pathname:"/".concat(a)})};return Object(V.jsx)(Me,{onClose:l,children:Object(V.jsxs)("div",{className:De.a.body,onClick:function(e){e.stopPropagation()},children:[Object(V.jsx)("button",{className:De.a.button,onClick:l,children:Object(V.jsx)(_e.CloseIcon,{type:"primary"})}),i]})})},Ge=n(43),He=n.n(Ge),Je=n(85),Qe=n.n(Je),Xe=function(e){var t=e.to,n=e.icon,a=e.children,i=Object(u.j)(t),c=Object(r.useMemo)((function(){return(null===i||void 0===i?void 0:i.isExact)?"primary":"secondary"}),[i]),s="burger"==n?Object(V.jsx)(_e.BurgerIcon,{type:c}):"list"==n?Object(V.jsx)(_e.ListIcon,{type:c}):Object(V.jsx)(_e.ProfileIcon,{type:c});return Object(V.jsxs)(K.c,{className:Qe.a.link,to:t,children:[s,Object(V.jsx)("div",{className:"m-1"}),Object(V.jsx)("p",{className:"text text_type_main-default text_color_inactive ".concat((null===i||void 0===i?void 0:i.isExact)&&Qe.a.active),children:a})]})},We=function(){return Object(V.jsx)("header",{className:He.a.header,children:Object(V.jsxs)("nav",{className:He.a.content,children:[Object(V.jsxs)("ul",{className:He.a.list,children:[Object(V.jsx)(Xe,{to:"/",icon:"burger",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"}),Object(V.jsx)(Xe,{to:"/feed",icon:"list",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(V.jsx)(K.b,{to:"/",children:Object(V.jsx)(_e.Logo,{})}),Object(V.jsx)("div",{className:He.a.wrapper,children:Object(V.jsx)(Xe,{to:"/profile/edit",icon:"profile",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"})})]})})},Ze=n(21),Ye=n.n(Ze),Ke=n.p+"static/media/orderConfirmed.fb9f8534.svg",$e=function(){var e=L((function(e){return{number:e.order.orderData.number,orderRequestSent:e.order.orderRequestSent,orderRequestFailed:e.order.orderRequestFailed}})),t=e.number,n=e.orderRequestSent;return Object(V.jsx)(V.Fragment,{children:n?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("p",{className:Ye.a["id-s"],children:"123123"})," ",Object(V.jsx)("p",{className:Ye.a["identification-s"],children:"qwdqwdqwdqwdqwdqwd"}),Object(V.jsx)("p",{className:Ye.a["text-s"],children:"qwdqwdqwdqwdqwdqwdqwdqwdqwdqwdqwdqwd"}),Object(V.jsx)("p",{className:Ye.a["text-s"],children:"qwdqwdqwdqwdqwdqwd"})]}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("p",{className:"text text_type_digits-large ".concat(Ye.a.id),children:t||"\u0422\u0443\u0442 \u0431\u0443\u0434\u0435\u0442"}),Object(V.jsx)("p",{className:"text text_type_main-medium ".concat(Ye.a.identification),children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(V.jsx)("img",{className:Ye.a.image,src:Ke,alt:"Order Confirmed"}),Object(V.jsx)("p",{className:"text text_type_main-default ".concat(Ye.a.text),children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(V.jsx)("p",{className:"text text_type_main-default text_color_inactive ".concat(Ye.a.text),children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})})},et=n(207),tt=n(117),nt=n(208),rt=n(44),at=n.n(rt),it=n(113),ct=n.n(it),st=function(e,t,n){return function(r){r({type:k});var a=e.concat([t,t]).map((function(e){return e._id}));d.handleOrder(a,n).then((function(e){if(!e||!e.success)throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430.");var t=e.name,a=e.order.number;r({type:v,order:{name:t,number:a}}),r({type:j}),r(X(n))})).catch((function(e){console.log(e),r({type:w})}))}},ot=function(){var e=Object(u.g)(),t=A(),n=L((function(e){return{bun:e.burger.bun,ingredients:e.burger.ingredients,isLoggedIn:Boolean(e.user.token),token:e.user.token}})),r=n.ingredients,a=n.bun,i=n.isLoggedIn,c=n.token,s=L((function(e){return e.burger.priceSum})),o=L((function(e){return e.burger.isValidBurger}));return Object(V.jsx)("div",{className:ct.a.check,children:o&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("p",{className:"text text_type_main-large",children:s}),Object(V.jsx)("div",{className:"m-1"}),Object(V.jsx)(_e.CurrencyIcon,{type:"primary"}),Object(V.jsx)("div",{className:"m-3"}),Object(V.jsx)(_e.Button,{type:"primary",size:"large",onClick:function(){i?t(st(r,a,c)):e.replace({pathname:"/login"})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})})},lt=n(209),dt=n(114),ut=n.n(dt),jt=function(e){var t=e.card,n=e.type,a=void 0===n?void 0:n,i=e.index,c=e.style,s=t._id,o=Object(r.useRef)(null),l=Object(B.b)(),d=t.isLocked,u=void 0!==d&&d,j=t.name,m=t.price,b=t.image,f=Object(nt.a)({accept:"constructor",hover:function(e,t){var n,r=[e.index,i],a=r[0],c=void 0===a?0:a,s=r[1],d=void 0===s?0:s;if(c!==d){var u=o&&(null===(n=o.current)||void 0===n?void 0:n.getBoundingClientRect()),j=u&&(u.bottom-u.top)/2,m=t.getClientOffset(),b=m&&u&&m.y-u.top;if(!(b&&j&&c<d&&b<j))if(!(b&&j&&c>d&&b>j))l({type:_,from:c,to:d}),e.index=d}}}),O=Object(ue.a)(f,2)[1],x=Object(lt.a)({type:"constructor",item:{id:s,index:i},collect:function(e){return{isDragging:e.isDragging()}}}),h=Object(ue.a)(x,2),g=h[0].isDragging;return(0,h[1])(O(o)),Object(V.jsxs)("li",{ref:u?null:o,className:ut.a.card,style:Object(D.a)(Object(D.a)({},c),{},{opacity:g?0:1}),draggable:!u,children:[" ",!u&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(_e.DragIcon,{type:"primary"}),Object(V.jsx)("div",{className:"m-1"})]}),Object(V.jsx)(_e.ConstructorElement,{handleClose:function(){l(function(e){return{type:p,index:e}}(i))},type:a,isLocked:u,text:j,price:m,thumbnail:b})," "]})},_t=function(){var e=A(),t=L((function(e){return e.burger.bun})),n=L((function(e){return e.burger.ingredients})),a=Object(r.useMemo)((function(){return Boolean(t)}),[t]),i=Object(nt.a)({accept:["bun","sauce","main"],drop:function(t){var n;e({type:"bun"===(n=t.ingredient).type?m:b,ingredient:n})}}),c=Object(ue.a)(i,2)[1];return Object(V.jsx)("section",{className:at.a.maker,ref:c,children:a||n.length?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("ul",{className:at.a.list,children:[t&&a?Object(V.jsx)(jt,{index:-2,style:{margin:"0 15px 15px 0"},type:"top",card:Object(D.a)(Object(D.a)({},t),{},{isLocked:!0,name:t.name+" (\u0432\u0435\u0440\u0445)"})}):"",Object(V.jsx)("div",{className:at.a.content,children:n.map((function(e,t){return Object(V.jsx)(jt,{card:e,index:t},e.index)}))}),t&&a?Object(V.jsx)(jt,{index:-1,style:{padding:"0 16px 0 0"},type:"bottom",card:Object(D.a)(Object(D.a)({},t),{},{isLocked:!0,name:t.name+" (\u043d\u0438\u0437)"})}):""]}),Object(V.jsx)(ot,{})]}):Object(V.jsx)("p",{className:"text text_type_main-large ".concat(at.a.none),children:"\u0412\u044b\u0431\u0438\u0440\u0430\u0439\u0442\u0435 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u044b \u0438 \u0441\u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0435\u0431\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"})})},mt=n(87),bt=n.n(mt),pt=function(e){var t=e.active,n=e.value,r=e.children,i=e.onClick,c="".concat(bt.a.tab," ").concat(t?bt.a.tab_type_current:""),s=a.a.useCallback((function(){"function"===typeof i&&i(n)}),[i,n]);return Object(V.jsx)("div",{className:"".concat(c," pt-4 pr-10 pb-4 pl-10 noselect"),onClick:s,children:Object(V.jsx)("span",{className:"text text_type_main-default",children:r})})},ft=n(45),Ot=n.n(ft),xt=n(32),ht=n.n(xt),gt=n(26),yt=n.n(gt),vt=function(){return Object(V.jsxs)("li",{className:yt.a.card,children:[Object(V.jsx)("div",{className:yt.a.image}),Object(V.jsxs)("div",{className:yt.a.price,children:[Object(V.jsx)("span",{className:yt.a.money,children:"125125"}),Object(V.jsx)("div",{className:yt.a.icon})]}),Object(V.jsx)("span",{className:yt.a.name,children:"qwdqwdqwdqwdqwdqwd"}),Object(V.jsx)("span",{className:yt.a.name,children:"qwdqwdqwd"})]})},Nt=function(){var e=Array(4).fill(null).map((function(e,t){return t}));return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("span",{className:ht.a.title,children:"qwdqwdqwd"}),Object(V.jsx)("div",{className:ht.a.section,children:e.map((function(e,t){return Object(V.jsx)(vt,{},t)}))}),Object(V.jsx)("span",{className:ht.a.title,children:"qwdqwdqwd"}),Object(V.jsx)("div",{className:ht.a.section,children:e.map((function(e,t){return Object(V.jsx)(vt,{},t)}))}),Object(V.jsx)("span",{className:ht.a.title,children:"qwdqwdqwd"}),Object(V.jsx)("div",{className:ht.a.section,children:e.map((function(e,t){return Object(V.jsx)(vt,{},t)}))})]})},wt=n(63),kt=n.n(wt),Et=n(27),St=n.n(Et),Ct=function(e){var t=e.ingredient,n=Object(u.h)(),r=t.name,a=t.price,i=t.type,c=t.image,s=t.image_mobile,o=t._id,l=L((function(e){return{count:e.burger.bun&&("bun"===i?e.burger.bun._id===o&&2:e.burger.ingredients.filter((function(e){return e._id===o})).length),mobile:e.config.isMobileIngredients}})),d=l.mobile,j=l.count,_=Object(lt.a)({type:i,item:{ingredient:t},collect:function(e){return{isDragging:e.isDragging()}}}),m=Object(ue.a)(_,2)[1];return Object(V.jsx)(K.b,{to:{pathname:"/ingredients/".concat(o),state:{background:n}},className:St.a.link,children:Object(V.jsxs)("li",{className:St.a.card,draggable:!0,ref:m,children:[" ",Object(V.jsx)("img",{className:St.a.image,alt:"".concat(r),src:d?s:c,draggable:!1}),Object(V.jsxs)("div",{className:St.a.price,children:[Object(V.jsx)("span",{className:"text text_type_main-medium ".concat(St.a.money),children:a}),Object(V.jsx)(_e.CurrencyIcon,{type:"primary"})]}),Object(V.jsx)("p",{className:"text text_type_main-small ".concat(St.a.name),children:r}),j&&Object(V.jsx)("div",{className:St.a.wrapper,children:Object(V.jsx)(_e.Counter,{count:j,size:"default"})})]})})},Rt=a.a.forwardRef((function(e,t){var n=e.title,r=L((function(e){return{ingredients:"\u0411\u0443\u043b\u043a\u0438"===n?e.ingredients.buns:"\u0421\u043e\u0443\u0441\u044b"===n?e.ingredients.sauces:e.ingredients.mains}})).ingredients;return Object(V.jsxs)("div",{className:kt.a.container,ref:t,children:[Object(V.jsx)("h3",{className:"text text_type_main-medium ".concat(kt.a.name),children:n}),Object(V.jsx)("ul",{className:kt.a.list,children:r.map((function(e){return Object(V.jsx)(Ct,{ingredient:e},e._id)}))})]})})),Tt=Object(r.memo)((function(){var e=L((function(e){return{ingredientsRequestSent:e.ingredients.ingredientsRequestSent,ingredientsRequestFailed:e.ingredients.ingredientsRequestFailed}})),t=e.ingredientsRequestSent,n=e.ingredientsRequestFailed,a=Object(r.useRef)(null),i=Object(r.useRef)(null),c=Object(r.useRef)(null),s=Object(r.useState)("buns"),o=Object(ue.a)(s,2),l=o[0],d=o[1],u=Object(r.useCallback)((function(e){d(e)}),[]);return Object(V.jsxs)("section",{className:Ot.a.menu,children:[Object(V.jsx)("p",{className:"text text_type_main-large ".concat(Ot.a.title),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(V.jsxs)("div",{className:Ot.a.tab,children:[Object(V.jsx)(pt,{value:"buns",active:"buns"===l,onClick:u,children:"\u0411\u0443\u043b\u043a\u0438"}),Object(V.jsx)(pt,{value:"sauce",active:"sauce"===l,onClick:u,children:"\u0421\u043e\u0443\u0441\u044b"}),Object(V.jsx)(pt,{value:"main",active:"main"===l,onClick:u,children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})]}),Object(V.jsx)("section",{className:Ot.a.page,id:"ingredient-scroll",onScroll:function(){if(!t&&!n){var e=a.current.getBoundingClientRect(),r=i.current.getBoundingClientRect();e.y<=0?r.y<=0?d("main"):d("sauce"):d("buns")}},children:t||n?Object(V.jsx)(Nt,{}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(Rt,{title:"\u0411\u0443\u043b\u043a\u0438",ref:a}),Object(V.jsx)(Rt,{title:"\u0421\u043e\u0443\u0441\u044b",ref:i}),Object(V.jsx)(Rt,{title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ref:c})]})})]})})),It=function(){return Object(V.jsxs)(et.a,{backend:tt.a,children:[Object(V.jsx)(Tt,{}),Object(V.jsx)(_t,{})]})},qt=n(46),Pt=n.n(qt),Ut=n(89),Dt=n.n(Ut),Ft=n(90),Bt=n.n(Ft),At=function(e){var t=e.number,n=e.title;return Object(V.jsxs)("div",{className:Bt.a.container,children:[Object(V.jsx)("p",{className:"text text_type_main-default",children:n}),Object(V.jsx)("p",{className:"text text_type_digits-large ".concat(Bt.a.shadow),children:t})]})},Lt=n(47),Vt=n.n(Lt),Mt=function(e){var t=e.title,n=e.extraClassName,r=e.list,a=void 0===r?[]:r;return a?Object(V.jsxs)("div",{className:Vt.a.container,children:[Object(V.jsxs)("p",{className:"text text_type_main-medium ".concat(Vt.a.title),children:[t,":"]}),Object(V.jsx)("ul",{className:Vt.a.list,children:a.length?a.map((function(e,t){return Object(V.jsx)("li",{className:Vt.a.element,children:Object(V.jsx)("p",{className:"text text_type_digits-default ".concat(n),children:e})},t)})):Object(V.jsx)("p",{className:"text text_type_main-default",children:"\u041d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]}):null},zt=n(64),Gt=n.n(zt),Ht=function(e,t){for(var n=[],r=0;r<t;++r)e[r]&&n.push(e[r]);return n},Jt=function(){var e=L((function(e){return{total:e.feed.total,totalToday:e.feed.totalToday,doneOrders:Ht(e.feed.feed.filter((function(e){return"done"===e.status})).map((function(e){return e.number})),10),pendingOrders:Ht(e.feed.feed.filter((function(e){return"done"!==e.status})).map((function(e){return e.number})),10)}})),t=e.total,n=e.totalToday,r=e.doneOrders,a=e.pendingOrders;return Object(V.jsxs)("section",{className:Gt.a.container,children:[Object(V.jsxs)("div",{className:Gt.a.orders,children:[Object(V.jsx)(Mt,{title:"\u0413\u043e\u0442\u043e\u0432\u044b",list:r,extraClassName:Gt.a.green}),Object(V.jsx)(Mt,{title:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",list:a})]}),Object(V.jsx)(At,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:",number:t||0}),Object(V.jsx)(At,{title:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:",number:n||0})]})};function Qt(e){return{type:E,payload:e}}var Xt=function(){var e=A(),t=L((function(e){return e.feed})).feed;return Object(r.useEffect)((function(){return e(Qt("wss://norma.nomoreparties.space/orders/all")),function(){}}),[]),Object(V.jsxs)("section",{className:Dt.a.container,children:[Object(V.jsxs)("div",{className:Dt.a.orders,children:[Object(V.jsx)("p",{className:"text text_type_main-medium",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(V.jsx)(oe,{orders:t})]}),Object(V.jsx)(Jt,{})]})},Wt=n(18),Zt=n.n(Wt),Yt=function(){var e=Object(u.i)().id,t=Object(u.j)().url,n=A(),a=L((function(e){return{orders:t.includes("profile")?e.user.orderHistory:e.feed.feed,initialIngredients:[].concat(Object(te.a)(e.ingredients.buns),Object(te.a)(e.ingredients.sauces),Object(te.a)(e.ingredients.mains))}})),i=a.orders,c=a.initialIngredients;Object(r.useEffect)((function(){i.length||n(Qt("wss://norma.nomoreparties.space/orders/all"))}),[]);var s=Object(r.useMemo)((function(){return i.find((function(t){return t._id==e}))}),[i,e]),o=Object(r.useMemo)((function(){var e=[];if(!s)return e;var t=s.ingredients.map((function(e){return c.find((function(t){return t._id===e}))}));return t.forEach((function(n){if(n){var r="bun"===n.type?2:t.filter((function(e){return e._id===n._id})).length,a=Object(D.a)(Object(D.a)({},n),{},{count:r});!e.find((function(e){return e._id===n._id}))&&e.push(a)}})),e}),[i]),l=Object(r.useMemo)((function(){return s&&"done"===s.status?Zt.a.green:""}),[s]),d=Object(r.useMemo)((function(){return o.reduce((function(e,t){return e+t.price*(t.count||1)}),0)}),[o]);return s?Object(V.jsxs)("section",{className:Zt.a.container,children:[Object(V.jsxs)("p",{className:"text text_type_digits-default ".concat(Zt.a.id),children:["#",s.number]}),Object(V.jsx)("h2",{className:"text text_type_main-medium ".concat(Zt.a.name),children:s.name}),Object(V.jsx)("p",{className:"text text_type_main-small ".concat(Zt.a.status," ").concat(l),children:"done"===s.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"})," ",Object(V.jsx)("p",{className:"text text_type_main-medium",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(V.jsx)("ul",{className:Zt.a.list,children:o.map((function(e){return Object(V.jsxs)("li",{className:Zt.a.item,children:[Object(V.jsx)(ce,{ingredient:e}),Object(V.jsx)("p",{className:"text text_type_main-default ".concat(Zt.a.ingredient),children:e.name}),Object(V.jsxs)("div",{className:Zt.a.check,children:[Object(V.jsxs)("p",{className:"text text_type_digits-default",children:[e.count," x ",e.price]}),Object(V.jsx)(_e.CurrencyIcon,{type:"primary"})]})]},e._id)}))}),Object(V.jsxs)("div",{className:Zt.a.footer,children:[Object(V.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:s.createdAt}),Object(V.jsxs)("div",{className:Zt.a.price,children:[Object(V.jsx)("p",{className:"text text_type_digits-default",children:d}),Object(V.jsx)(_e.CurrencyIcon,{type:"primary"})]})]})]}):Object(V.jsx)("p",{className:"text text_type_main-large",children:"\u0417\u0430\u043a\u0430\u0437 \u043d\u0435 \u043d\u0430\u0439\u0434\u0451\u043d. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043e\u043d \u043d\u0435 \u0432\u0430\u0448"})};var Kt=function(){var e=Object(u.g)(),t=Object(u.h)(),n=("PUSH"===e.action||"REPLACE"===e.replace)&&t.state&&t.state.background,a=A(),i=L((function(e){return{token:e.user.token,loggedIn:Boolean(e.user.token),isOrderPopupOpen:e.order.orderPopupOpen}})),c=i.token,s=i.loggedIn,o=i.isOrderPopupOpen;Object(r.useEffect)((function(){a((function(e){e({type:g}),d.getIngredients().then((function(t){if(t.data&&t.success)return e({type:y,ingredients:t.data});throw new Error("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u043e\u0432.")})).catch((function(t){console.log(t),e({type:h})}))}))}),[a]),Object(r.useEffect)((function(){s&&a(X(c))}),[c]),Object(r.useEffect)((function(){var e=Q("token");if(e&&!s)return l(e)}),[]);var l=Object(r.useCallback)((function(e){a(function(e){return function(t){d.updateToken(e).then((function(e){var n=e.success,r=e.accessToken,a=e.refreshToken;if(n)return console.log("UPDATE TOKEN"),J("token",a),t(W(r)),t(Y(r));throw new Error("Couldn't refresh token")})).catch((function(e){return console.log(e)}))}}(e))}),[e,a,d]);return Object(r.useEffect)((function(){if(s){var t=e.location.pathname;return e.replace({pathname:t})}}),[s]),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(We,{}),Object(V.jsx)("main",{className:Pt.a.main,children:Object(V.jsxs)(u.d,{children:[Object(V.jsx)(u.b,{path:"/login",exact:!0,children:Object(V.jsx)(ye,{})}),Object(V.jsx)(u.b,{path:"/register",exact:!0,children:Object(V.jsx)(we,{})}),Object(V.jsx)(u.b,{path:"/forgot-password",exact:!0,children:Object(V.jsx)(Te,{})}),Object(V.jsx)(u.b,{path:"/reset-password",exact:!0,children:Object(V.jsx)(Se,{})}),!n&&Object(V.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(V.jsx)("section",{className:Pt.a.center,children:Object(V.jsx)(Pe,{})})}),!n&&Object(V.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(V.jsx)("section",{className:Pt.a.center,children:Object(V.jsx)(Yt,{})})}),Object(V.jsx)(u.b,{path:"/feed",children:Object(V.jsx)(Xt,{})}),Object(V.jsx)(z,{exact:!0,path:"/profile/orders/:id",children:Object(V.jsx)("section",{className:Pt.a.center,children:Object(V.jsx)(Yt,{})})}),Object(V.jsx)(z,{path:"/profile",children:Object(V.jsx)(pe,{})}),Object(V.jsx)(u.b,{path:"/",children:Object(V.jsx)(It,{})})]})}),o&&Object(V.jsx)(ze,{actionType:N,children:Object(V.jsx)($e,{})}),n&&Object(V.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(V.jsx)(ze,{actionType:null,children:Object(V.jsx)(Pe,{})})}),n&&Object(V.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(V.jsx)(ze,{actionType:null,link:"feed",children:Object(V.jsx)(Yt,{})})}),n&&Object(V.jsx)(u.b,{path:"/profile/orders/:id",exact:!0,children:Object(V.jsx)(ze,{actionType:null,link:"profile/orders",children:Object(V.jsx)(Yt,{})})})]})},$t=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))},en=n(23),tn=n(116),nn={orderData:{name:"",number:0},orderPopupOpen:!1,orderRequestSent:!1,orderRequestFailed:!1},rn={buns:[],sauces:[],mains:[],ingredientsRequestSent:!1,ingredientsRequestFailed:!1},an={index:0,bun:null,ingredients:[],isValidBurger:!1,priceSum:0},cn=function(e,t){return t.reduce((function(e,t){return e+t.price}),0)+(Object.keys(e).length?2*e.price:0)},sn={email:"",name:"",orderHistory:[],token:null},on={feed:[],total:0,totalToday:0,feedRequestSent:!1,feedRequestFailed:!1},ln={headerPopupOpen:!1,isMobileHeader:!1,isMobileIngredients:!1},dn=Object(en.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(D.a)(Object(D.a)({},e),{},{ingredientsRequestSent:!0,ingredientsRequestFailed:!1});case h:return Object(D.a)(Object(D.a)({},e),{},{ingredientsRequestSent:!1,ingredientsRequestFailed:!0});case y:return console.log(t.ingredients),Object(D.a)(Object(D.a)({},e),{},{ingredientsRequestSent:!1,ingredientsRequestFailed:!1,buns:t.ingredients.filter((function(e){return"bun"===e.type})),sauces:t.ingredients.filter((function(e){return"sauce"===e.type})),mains:t.ingredients.filter((function(e){return"main"===e.type}))});default:return e}},config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(D.a)(Object(D.a)({},e),{},{headerPopupOpen:!0});case P:return Object(D.a)(Object(D.a)({},e),{},{headerPopupOpen:!1});case U:return Object(D.a)(Object(D.a)({},e),{},{isMobileIngredients:t.value<=1250,isMobileHeader:Boolean(t.value<=1240)});default:return e}},burger:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(D.a)(Object(D.a)({},e),{},{bun:t.ingredient,priceSum:cn(t.ingredient,e.ingredients),isValidBurger:!0});case b:var n=[].concat(Object(te.a)(e.ingredients),[Object(D.a)(Object(D.a)({},t.ingredient),{},{index:e.index})]);return Object(D.a)(Object(D.a)({},e),{},{ingredients:n,priceSum:e.bun?cn(e.bun,n):0,index:e.index+1});case p:var r=e.ingredients.filter((function(e,n){return n!==t.index}));return Object(D.a)(Object(D.a)({},e),{},{ingredients:r,priceSum:e.bun?cn(e.bun,r):0});case _:var a=Object(te.a)(e.ingredients),i=[t.from,t.to],c=i[0],s=i[1];return a.splice(c,1),a.splice(s,0,e.ingredients[c]),Object(D.a)(Object(D.a)({},e),{},{ingredients:a});case j:return Object(D.a)(Object(D.a)({},e),{},{ingredients:[],bun:null});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(D.a)(Object(D.a)({},e),{},{orderPopupOpen:!0,orderData:t.order,orderRequestFailed:!1,orderRequestSent:!1});case k:return Object(D.a)(Object(D.a)({},e),{},{orderRequestFailed:!1,orderRequestSent:!0,orderPopupOpen:!0});case w:return Object(D.a)(Object(D.a)({},e),{},{orderRequestFailed:!0,orderRequestSent:!1});case N:return Object(D.a)(Object(D.a)({},e),{},{orderPopupOpen:!1});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:on,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(D.a)(Object(D.a)({},e),{},{feed:t.feed,total:t.total,totalToday:t.totalToday});case f:return Object(D.a)(Object(D.a)({},e),{},{feedRequestSent:!1,feedRequestFailed:!0});case x:return Object(D.a)(Object(D.a)({},e),{},{feedRequestSent:!0,feedRequestFailed:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return sn;case R:return Object(D.a)(Object(D.a)({},e),{},{email:t.email,name:t.name});case T:return Object(D.a)(Object(D.a)({},e),{},{token:t.token});case I:return Object(D.a)(Object(D.a)({},e),{},{orderHistory:t.orders});default:return e}}}),un=function(e,t,n){return function(r){r(function(e,t,n){return{type:O,feed:e,total:t,totalToday:n}}(e,t,n))}},jn=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||en.c)(Object(en.a)(tn.a,(function(e){var t=null;return function(n){return function(r){var a=e.dispatch,i=r.type,c=r.payload;i===E&&(t=new WebSocket(c)),t&&(t.onopen=function(e){a({type:"WS_CONNECTION_SUCCESS",payload:e})},t.onclose=function(e){a({type:S,payload:e})},t.onerror=function(e){a({type:"WS_CONNECTION_ERROR",payload:e})},t.onmessage=function(e){var t=JSON.parse(e.data),n=t.success,r=t.orders,i=void 0===r?[]:r,c=t.total,s=void 0===c?0:c,o=t.totalToday;n&&a(un(i,s,void 0===o?0:o))}),n(r)}}}))),_n=Object(en.d)(dn,jn);c.a.render(Object(V.jsx)(a.a.StrictMode,{children:Object(V.jsx)(B.a,{store:_n,children:Object(V.jsx)(K.a,{children:Object(V.jsx)(Kt,{})})})}),document.getElementById("root")),$t()},21:function(e,t,n){e.exports={id:"order-details_id__3rqtH",identification:"order-details_identification__1BOw2",image:"order-details_image__3zALD",text:"order-details_text__1bI4W",s:"order-details_s__s_4Iw","skeleton-loading":"order-details_skeleton-loading__1MkAQ","id-s":"order-details_id-s__4_SaG order-details_s__s_4Iw","identification-s":"order-details_identification-s__1I8c9 order-details_s__s_4Iw","text-s":"order-details_text-s__3ayd0 order-details_s__s_4Iw"}},24:function(e,t,n){e.exports={order:"order-info_order__XmAsj",id:"order-info_id__2babQ",date:"order-info_date__wDPcf",name:"order-info_name__3My07",price:"order-info_price__2sHnE",ingredients:"order-info_ingredients__nfLi-",element:"order-info_element__wQzBX"}},26:function(e,t,n){e.exports={card:"burger-ingredient-skeleton_card__3-vqS",image:"burger-ingredient-skeleton_image__1F2eg","skeleton-loading":"burger-ingredient-skeleton_skeleton-loading__2Xs39",price:"burger-ingredient-skeleton_price__2Z-T0",money:"burger-ingredient-skeleton_money__1fouI",name:"burger-ingredient-skeleton_name__1REcz",icon:"burger-ingredient-skeleton_icon__3baCn"}},27:function(e,t,n){e.exports={link:"burger-ingredient_link__4ff6A",card:"burger-ingredient_card__3lK13",price:"burger-ingredient_price__OLJUP",money:"burger-ingredient_money__2Gge-",name:"burger-ingredient_name__2nxP7",wrapper:"burger-ingredient_wrapper__2riit"}},31:function(e,t,n){e.exports={profile:"profile_profile__Ue6Pm",navigation:"profile_navigation__dXXaV",hint:"profile_hint__1Hv2Z",link:"profile_link__2as_w",current:"profile_current__WBzkF"}},32:function(e,t,n){e.exports={section:"burger-skeletons_section__B0Bg_",title:"burger-skeletons_title__3S_DV","skeleton-loading":"burger-skeletons_skeleton-loading__3BQYf"}},35:function(e,t,n){e.exports={container:"sign-in_container__1AQV4",text:"sign-in_text__27tgu",link:"sign-in_link__3iK_N"}},42:function(e,t,n){e.exports={element:"ingredient-icon_element__14fnY",image:"ingredient-icon_image__IZWNT",wrapper:"ingredient-icon_wrapper__29ai3",number:"ingredient-icon_number__1eMAy"}},43:function(e,t,n){e.exports={header:"app-header_header__2PSUJ",content:"app-header_content__3LIib",list:"app-header_list__1yFVY",menu:"app-header_menu__1cdx4",wrapper:"app-header_wrapper__2g7Qr"}},44:function(e,t,n){e.exports={maker:"burger-constructor_maker__gp9w3",list:"burger-constructor_list__aX1g0",content:"burger-constructor_content__1dd7v",none:"burger-constructor_none__2aU1W"}},45:function(e,t,n){e.exports={menu:"burger-ingredients_menu__1xG-y",tab:"burger-ingredients_tab__oMFAS",page:"burger-ingredients_page__3iO9R"}},46:function(e,t,n){e.exports={root:"app_root__1Bf9r",main:"app_main__21u-8",center:"app_center__XmWTi"}},47:function(e,t,n){e.exports={container:"orders-collection_container__1b5Js",list:"orders-collection_list__1omPF",title:"orders-collection_title__1m0fH",element:"orders-collection_element__3k7xy"}},59:function(e,t,n){e.exports={form:"profile-edit_form__Jvqe6",confirmation:"profile-edit_confirmation__Cr15F",none:"profile-edit_none__wjKs1"}},60:function(e,t,n){e.exports={container:"sign-up_container__3dH60",text:"sign-up_text__3O8f5",link:"sign-up_link__1Pvv9"}},61:function(e,t,n){e.exports={container:"reset-password_container__hHkug",text:"reset-password_text__izp3b",link:"reset-password_link__Ixu2f"}},62:function(e,t,n){e.exports={container:"forgot-password_container__1aCgM",text:"forgot-password_text__1lrMp",link:"forgot-password_link__2harn"}},63:function(e,t,n){e.exports={container:"ingredients-category_container__lTJiq",list:"ingredients-category_list__3VRl8"}},64:function(e,t,n){e.exports={container:"statistics_container__mjhgh",orders:"statistics_orders__2_1Z4",green:"statistics_green__QWFTZ"}},84:function(e,t,n){e.exports={body:"modal-popup_body__17tQo",button:"modal-popup_button__v0zZX"}},85:function(e,t,n){e.exports={link:"header-link_link__1YTpA",active:"header-link_active__TsuA3"}},87:function(e,t,n){e.exports={tab:"tab_tab__1LdR-",tab_type_current:"tab_tab_type_current__-qK2z"}},89:function(e,t,n){e.exports={container:"feed_container__h2Rrx",orders:"feed_orders__2kr8S"}},90:function(e,t,n){e.exports={container:"digit-display_container__3y4Aw",shadow:"digit-display_shadow__1khOY"}}},[[202,1,2]]]);
//# sourceMappingURL=main.69dd15cf.chunk.js.map